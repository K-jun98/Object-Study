# 역할, 책임, 협력
> 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 협력이라고 한다.
> 객체가 협력에 참여하기 위해 수행하는 로직은 책임이라고 부른다.
> 객체들이 협력 안에서 수행하는 책임들이 모여서 객체가 수행하는 역할을 구성한다.
---

## 협력

### 협력
- 협력은 객체지향의 세계에서 기능을 구현할 수 있는 유일한 방법.
- 자신이 할 수 없는 일을 다른 객체에게 위임하면 협력에 참여하는 객체들의 전체적인 자율성을 향상시킬 수 있다.
- 자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메시지를 보내 협력을 요청한다.
### 메시지 전송
- 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단
- 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없기 때문에 오직 메시지 전송을 통해서만 자신의 요청을 전달할 수 있다.
  - 메시지를 수신한 객체는 **메서드**를 실행해 요청에 응답한다.

## 책임

### 책임이란 무엇인가
- 협력에 참여하기 위해 객체가 수행하는 행동을 책임이라고 부른다.
- 객체의 책임 분류
  - 하는것
    - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
  - 아는 것
    - 사적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
> - 일반적으로 책임과 메시지의 크기는 다르다.
> - 단순한 책임이라고 생각했던 것이 여러 개의 메시지로 분할되기도 하고 하나의 객체가 수행할 수 있다고 생각했던 책임이 나중에는 여러 객체들이 협력해야만 하는 커다란 책임으로 자라는 것이 일반적이다.

- 객체지향 설계에서 가장 중요한 것은 책임이다. 객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 전체적인 품질을 결정한다.

### 책임 할당
- 자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다.
> - "예매하라" 메시지를  선택했으면 메시지를 처리할 적절한 객체를 선택해야 한다. 영화를 예매하는 책임을 어떤 객체에 할당해야 할까?
> - 영화 예매와 관련된 정보를 가장 많이 알고 있는 개체에게 책임을 할당하는 것이 바람직하다.(Screening)
> - Screening 객체에서 예매 가격을 계산해야 한다. 그럼 Screening 은 외부의 객체에게 가격 계산을 요청해야 한다는 것을 의미한다.
> - 따라서 "계산하라" 라는 이름의 메시지가 필요하고 그럼 처리할 객체를 정해야 한다.
- 객체지향 설계는 협력에 필요한 메시지를 찾고 메시지에 적절한 객체를 선택하는 반복적인 과정을 통해 이뤄진다.

### 책임 주도 설계
- 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법
- 구현인 아닌 책임에 집중하는 것이 중요한 이유는 유연하고 견고한 객체지향 시스템을 위해 가장 중요한 재료가 바로 책임이기 때문이다.

### 행동이 상태를 결정한다.
- 객체를 객체답게 만드는 것은 객체의 상태가 아니라 객체가 다른 객체에게 제공하는 행동이다.
- 객체에 필요한 상태가 무엇인지를 결정하고, 그 후에 상태에 필요한 행동을 결정하는 방식은 캡슐화를 저해한다.
- 캡슐화를 위반하지 않도록 구현에 대한 결정을 뒤로 미루면서 객체의 행위를 고려하기 위해서는 항상 협력이라는 문맥 안에서 객체를 생각해야 한다.
> 행동이 중요하다. 객체가 가질 수 있는 상태는 행동을 결정하고 나서야 비로소 결정할 수 있다.<BR>
> 협력이 객체의 행동을 결정하고 행동이 상태를 결정한다. 그리고 그 행동이 바로 객체의 책임이 된다.

## 역할

### 역할과 협력
- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 **역할**이라고 부른다.
- 실제로 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는 게 좋다.
> AmountDiscountPolicy,PercentDiscountPolicy 두 종류의 객체를 교대로 바꿔 끼울 수 있는 일종의 슬롯이 바로 역할이다.<Br>
> 역할이 두 종류의 구체적인 객체를 포괄하는 추상화라는 점을 기억하자.
